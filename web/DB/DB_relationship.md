# 20230410

- django와 좀더

## A many-to-one relationship

> 관계형 데이터베이스에서의 외래키 속성을 사용해 모델간 N:1 관계 설정하기

> RDB에서의 관계
> (RDB) = 관계형 데이터베이스

- 데이터를 테이블 행, 열 등으로 나누어 구조화하는 방식
- RDB의 모든 테이블에는 행에서 고유하게 식별 가능한 기본 키라는 속성이 있으며, 외래 키를 사용하여 각 행에서 서로 다른 테이블 간의 관계를 만드는 데 사용할 수 있다. 
1. 1:1
- One-to-one relationships
- 한 테이블의 레코드 하나가 다른 테이블의 레코드 단 한 개와 관련된 경우 
- ex) 주문 - 송장 
2. N:1
- Many-to-one relationships
- 한 테이블의 0개 이상의 레코드가 다른 테이블의 레코드 한 개와 관련된 경우
- 기준 테이블에 따라 1:N
- ex) 게시글 - 댓글
3. M:N
- Many-to-many relationships
- 한 테이블의 0개 이상의 레코드가 다른 테이블의 0개이상의 레코드와 관련된 경우
- 양쪽 모두에서 N:1 관계를 가짐
- 하나의 무엇1이 여러개의 무엇2와. 하나의 무엇2가 여러개의 무엇 1과.
- ex) 가수 - 노래 / 인스타 태그 게시물

## Foreign Key

- 외래 키(외부 키)

- 관계형 데이터베이스에서 다른 테이블의행을 식별할 수 있는 키

- 참조되는 테이블의 기본 키(Primary Key)를 가리킴

- 참조하는 테이블의 행 1개의 값은, 참조되는 측 테이블의 행 값에 대응됨
  -

- 참조하는 테이블 행 여러개가 

- 키를 사용하여 **부모 테이블의 유일한 값을 참조**

- 외래 키의 값이 반드시 부모 테이블의 **기본 키일 필요는 없지만 유일한 값**이어야 함 (어차피 유일할거 걍 PK가 편함)

## N:1(Comment-Article)

- Comment(N) - Article(1)

- 0개 이상의 댓글은 1개의 게시글에 작성 될 수 있음

- #### 모델 관계 설정

#### Django Relationship fields

- 장고의 models.py에서 

###### Comment Model

> ###### ForeignKey arguments - on_delete

- ex) 삭제 됐을 때. 게시글 1에 대해 댓글이 여러개 달려있다. 근데 1번 게시글을 삭제했을 때, 그 댓글들을 어떻게 할거야.

- on_delete 옵션 값
  
  - CASCADE:
  - PROTECT, SET_NULL, 

#### 관계 모델 참조

정참조 : 내가 갖고 있는 관계를 통해서 접근하면 정참조
역참조 : 얘한테서 코멘트를 갖고오고싶은데 근데 관계는 맺어져있단 말이야 그럼 역참조 ??

- django는 모델 간 N:1 혹은 M:N 관계가 설정되면 역참조할 때에 사용할 수 있는 manager를 생성
  - 우리가 이전에 모델 생성 시 object

> ###### 역참조

- article.comment_set
  - Article 모델이 Comment 모델을 참조(역참조)

## N : 1 (Article-user)
